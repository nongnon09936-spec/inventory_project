<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏û‡∏±‡∏™‡∏î‡∏∏ - PSRU</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;700&family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">


</head>

<body class="flex flex-col min-h-screen"> <nav class="navbar-psru shadow-md mb-8">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                
                <a href="{{ url_for('dashboard.index') }}" class="hover:opacity-90 transition cursor-pointer text-decoration-none group">
                    <h1 class="text-2xl md:text-3xl font-bold text-white flex items-center gap-3">
                        <div class="bg-white text-[#006837] w-10 h-10 rounded-full flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-boxes-stacked text-lg"></i>
                        </div>
                        <span>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏û‡∏±‡∏™‡∏î‡∏∏</span>
                    </h1>
                </a>

                <div class="flex items-center">
                    {% block buttons %}{% endblock %}
                </div>
            </div>
        </div>
    </nav>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div id="flash-messages" class="fixed top-24 right-5 z-50 flex flex-col gap-2">
          {% for category, message in messages %}
            <div class="px-6 py-4 rounded-lg shadow-lg text-white flex items-center gap-3 animate-bounce-in backdrop-blur-sm
                  {{ 'bg-[#006837]/90' if category == 'success' else 'bg-red-500/90' }}">
                
                {% if category == 'success' %}
                  <i class="fa-solid fa-circle-check text-xl text-[#FFC107]"></i> {% else %}
                  <i class="fa-solid fa-circle-exclamation text-xl"></i>
                {% endif %}

                <span class="font-medium font-prompt">{{ message }}</span>
                
                <button onclick="this.parentElement.remove()" class="ml-4 opacity-70 hover:opacity-100">
                  <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
          {% endfor %}
        </div>

        <script>
            setTimeout(function() {
                const flashMsg = document.getElementById('flash-messages');
                if (flashMsg) {
                    flashMsg.style.transition = "opacity 0.5s ease";
                    flashMsg.style.opacity = "0";
                    setTimeout(() => flashMsg.remove(), 500);
                }
            }, 3000); 
        </script>
      {% endif %}
    {% endwith %}

    <main class="flex-grow w-full max-w-7xl mx-auto px-6 pb-12">
        {% block content %}{% endblock %}
    </main>

    <footer class="bg-[#003366] text-white py-6 mt-auto">
        <div class="max-w-7xl mx-auto px-6 text-center md:text-left flex flex-col md:flex-row justify-between items-center text-sm font-light opacity-80">
            <div>
                <p>&copy; 2024 ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏û‡∏±‡∏™‡∏î‡∏∏‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</p>
                <p class="text-xs text-[#FFC107]">‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏£‡∏≤‡∏ä‡∏†‡∏±‡∏è‡∏û‡∏¥‡∏ö‡∏π‡∏•‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°</p>
            </div>
            <div class="mt-2 md:mt-0">
                <i class="fa-solid fa-code mr-1"></i> Developed by IT Support
            </div>
        </div>
    </footer>

    {% block scripts %}<script>
    document.addEventListener('submit', function (e) {
        // ‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏° submit ‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ñ‡∏π‡∏Å‡∏Å‡∏î‡∏™‡πà‡∏á
        const submitBtn = e.target.querySelector('button[type="submit"]');
        if (submitBtn) {
            // ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏° ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-1"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...';
            submitBtn.classList.add('opacity-70', 'cursor-not-allowed');
        }
    });
    // 1. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡∏û‡∏±‡∏™‡∏î‡∏∏, ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ, ‡∏ï‡∏π‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á)
    function confirmDelete(event, url, title, text) {
        event.preventDefault(); // ‡∏´‡∏¢‡∏∏‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        
        Swal.fire({
            title: title || '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö?',
            text: text || "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏≤‡∏ß‡∏£‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#9ca3af',
            confirmButtonText: '<i class="fa-solid fa-trash mr-1"></i> ‡πÉ‡∏ä‡πà, ‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á‡πÄ‡∏•‡∏¢',
            cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',
            reverseButtons: true // ‡∏™‡∏•‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡∏¢‡∏π‡πà‡∏ã‡πâ‡∏≤‡∏¢ (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏ú‡∏•‡∏≠‡∏Å‡∏î)
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = url; // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‡∏Ñ‡πà‡∏≠‡∏¢‡∏û‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            }
        });
    }

    // 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô 2 ‡∏ä‡∏±‡πâ‡∏ô ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á (‡πÅ‡∏ö‡∏ö SweetAlert2)
    function confirmDoubleCheckSwal(event, url, roomName) {
        event.preventDefault();
        
        // ‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1
        Swal.fire({
            title: `‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á '${roomName}'?`,
            text: "‡∏û‡∏±‡∏™‡∏î‡∏∏‡πÅ‡∏•‡∏∞‡∏ï‡∏π‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#9ca3af',
            confirmButtonText: '‡πÉ‡∏ä‡πà, ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠',
            cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
        }).then((result) => {
            if (result.isConfirmed) {
                // ‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2 (‡∏ñ‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏£‡∏Å)
                Swal.fire({
                    title: 'üö® ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢!',
                    html: `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏•‡∏ö <b>'${roomName}'</b> ‡∏ó‡∏¥‡πâ‡∏á?<br><br>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å-‡∏¢‡∏∑‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å <b style="color:red;">"‡∏•‡∏ö‡∏ñ‡∏≤‡∏ß‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ"</b>`,
                    icon: 'error',
                    showCancelButton: true,
                    confirmButtonColor: '#d33',
                    cancelButtonColor: '#9ca3af',
                    confirmButtonText: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á!',
                    cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
                }).then((secondResult) => {
                    if (secondResult.isConfirmed) {
                        window.location.href = url;
                    }
                });
            }
        });
    }
</script>{% endblock %}
</body>
</html>
<div id="addItemModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity" onclick="toggleAddModal()"></div>
        <div class="bg-white rounded-xl p-6 w-full max-w-md relative z-10 shadow-2xl border-t-4 border-[#006837]">
            <h3 class="text-xl font-bold mb-4 text-[#006837] font-prompt flex items-center">
                <i class="fa-solid fa-plus-circle mr-2"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏±‡∏™‡∏î‡∏∏‡πÉ‡∏´‡∏°‡πà
            </h3>
            <form action="/add_item" method="POST" class="space-y-4">
                <input type="hidden" name="current_room" value="{{ current_location if current_location else '' }}">

                <input type="text" name="item_name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏±‡∏™‡∏î‡∏∏" maxlength="100" required
                    class="w-full border p-2 rounded-lg focus:ring-2 focus:ring-[#006837] outline-none">
                <select name="storage_id" required class="w-full border p-2 rounded-lg focus:ring-2 focus:ring-[#006837] outline-none bg-white">
                    <option value="" disabled selected>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏π‡πâ/‡∏ä‡∏±‡πâ‡∏ô‡∏ß‡∏≤‡∏á --</option>
                    {% for storage in storages %}
                        {% if not current_location or storage.location == current_location %}
                        <option value="{{ storage.storage_id }}">{{ storage.storage_name }} ({{ storage.location }})</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <div class="flex gap-2">
                    <input type="number" name="quantity" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" min="0" required class="w-1/2 border p-2 rounded-lg focus:ring-2 focus:ring-[#006837] outline-none">
                    <input type="text" name="unit" placeholder="‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏ö" maxlength="20" required class="w-1/2 border p-2 rounded-lg focus:ring-2 focus:ring-[#006837] outline-none">
                </div>
                <div class="flex justify-end gap-2 mt-4">
                    <button type="button" onclick="toggleAddModal()" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="px-4 py-2 bg-[#006837] text-white rounded-lg text-sm hover:bg-[#004d26] shadow-md font-prompt">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="withdrawModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-50" onclick="closeWithdrawModal()"></div>
        <div class="bg-white rounded-xl p-6 w-full max-w-md relative z-10 shadow-2xl border-t-4 border-[#E65100]">
            <h3 class="text-xl font-bold mb-2 text-[#E65100] font-prompt"><i class="fa-solid fa-dolly mr-2"></i>‡πÄ‡∏ö‡∏¥‡∏Å‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏≠‡∏≠‡∏Å</h3>
            <p class="text-sm text-gray-500 mb-4">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ö‡∏¥‡∏Å: <span id="withdrawItemName" class="font-bold text-gray-800">...</span></p>

            <form action="/withdraw_item" method="POST" class="space-y-4">
                <input type="hidden" name="item_id" id="withdrawItemId">
                <input type="hidden" name="current_room" value="{{ current_location if current_location else '' }}">

                <div>
                    <label class="text-xs text-gray-500">‡∏ú‡∏π‡πâ‡πÄ‡∏ö‡∏¥‡∏Å</label>
                    <select name="user_id" required class="w-full border p-2 rounded-lg bg-gray-50 focus:ring-2 focus:ring-[#E65100] outline-none">
                        <option value="" disabled selected>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ö‡∏¥‡∏Å --</option>
                        {% for user in users %}
                        <option value="{{ user.user_id }}">{{ user.fullname }} ({{ user.department }})</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="flex gap-2">
                    <div class="w-1/3">
                        <label class="text-xs text-gray-500">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å</label>
                        <input type="number" name="amount" id="withdrawAmount" value="1" min="1" required
                            class="w-full border p-2 rounded-lg text-center font-bold text-[#E65100] text-lg focus:ring-2 focus:ring-[#E65100] outline-none">
                    </div>
                    <div class="w-2/3 pt-6 text-sm text-gray-500">
                        ‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <span id="currentStock" class="font-bold text-gray-800">0</span> ‡∏ä‡∏¥‡πâ‡∏ô
                    </div>
                </div>

                <div class="flex justify-end gap-2 mt-4">
                    <button type="button" onclick="closeWithdrawModal()" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="px-4 py-2 bg-[#E65100] text-white rounded-lg text-sm hover:bg-[#EF6C00] shadow-md font-prompt">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="borrowModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-50" onclick="closeBorrowModal()"></div>
        <div class="bg-white rounded-xl p-6 w-full max-w-md relative z-10 shadow-2xl border-t-4 border-[#006837]">
            <h3 class="text-xl font-bold mb-2 text-[#006837] font-prompt"><i class="fa-solid fa-hand-holding-hand mr-2"></i>‡∏¢‡∏∑‡∏°‡∏û‡∏±‡∏™‡∏î‡∏∏/‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</h3>
            <p class="text-sm text-gray-500 mb-4">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏¢‡∏∑‡∏°: <span id="borrowItemName" class="font-bold text-gray-800">...</span></p>

            <form action="/borrow_item" method="POST" class="space-y-4">
                <input type="hidden" name="item_id" id="borrowItemId">
                <input type="hidden" name="current_room" value="{{ current_location if current_location else '' }}">

                <div>
                    <label class="text-xs text-gray-500">‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°</label>
                    <select name="user_id" required class="w-full border p-2 rounded-lg bg-gray-50 focus:ring-2 focus:ring-[#006837] outline-none">
                        <option value="" disabled selected>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏° --</option>
                        {% for user in users %}
                        <option value="{{ user.user_id }}">{{ user.fullname }} ({{ user.department }})</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="flex gap-2">
                    <div class="w-1/3">
                        <label class="text-xs text-gray-500">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
                        <input type="number" name="amount" value="1" min="1" required
                            class="w-full border p-2 rounded-lg text-center font-bold text-[#006837] text-lg focus:ring-2 focus:ring-[#006837] outline-none">
                    </div>
                    <div class="w-2/3">
                        <label class="text-xs text-gray-500">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡πÄ‡∏ä‡πà‡∏ô ‡∏¢‡∏∑‡∏°‡πÑ‡∏õ‡∏™‡∏≠‡∏ô)</label>
                        <input type="text" name="note" placeholder="..." maxlength="255" class="w-full border p-2 rounded-lg focus:ring-2 focus:ring-[#006837] outline-none">
                    </div>
                </div>

                <div class="flex justify-end gap-2 mt-4">
                    <button type="button" onclick="closeBorrowModal()" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="px-4 py-2 bg-[#006837] text-white rounded-lg text-sm hover:bg-[#004d26] shadow-md font-prompt">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="manageModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4 pt-10 pb-10">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-60 transition-opacity" onclick="toggleManageModal()"></div>
        <div class="bg-white rounded-xl p-6 w-full max-w-2xl relative z-10 shadow-xl max-h-screen overflow-y-auto border-t-4 border-[#006837]">

            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-[#006837] font-prompt">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h3>
                <button onclick="toggleManageModal()" class="text-gray-400 hover:text-gray-600 transition"><i class="fa-solid fa-times text-lg"></i></button>
            </div>

            <div class="border-b border-gray-200 mb-4">
                <nav class="-mb-px flex space-x-8">
                    <button onclick="switchTab('tabUser')" id="btnTabUser"
                        class="border-b-2 border-[#006837] py-2 px-1 text-sm font-medium text-[#006837] transition font-prompt"><i
                            class="fa-solid fa-users mr-1"></i> ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
                    <button onclick="switchTab('tabStorage')" id="btnTabStorage"
                        class="border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 transition font-prompt"><i
                            class="fa-solid fa-box mr-1"></i> ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á</button>
                </nav>
            </div>

            <div id="tabUser" class="block">
                <form action="/add_user" method="POST" class="flex gap-2 mb-4 bg-gray-50 p-3 rounded-lg border border-gray-100">
                    <input type="hidden" name="current_room" value="{{ current_location if current_location else '' }}">
                    <input type="text" name="fullname" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•" maxlength="100" required
                        class="flex-1 border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-[#006837]">
                    <input type="text" name="department" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ú‡∏ô‡∏Å" maxlength="100" required
                        class="w-1/3 border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-[#006837]">
                    <button type="submit"
                        class="bg-[#006837] hover:bg-[#004d26] text-white px-4 rounded text-sm transition shadow-sm font-prompt">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                </form>

                <table class="min-w-full text-sm text-left text-gray-600">
                    <thead>
                        <tr class="bg-green-50 text-[#006837] font-prompt">
                            <th class="px-4 py-2 rounded-l-lg">‡∏ä‡∏∑‡πà‡∏≠</th>
                            <th class="px-4 py-2">‡πÅ‡∏ú‡∏ô‡∏Å</th>
                            <th class="px-4 py-2 text-right rounded-r-lg">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                        <tr class="border-b border-gray-100 hover:bg-green-50/50 transition">
                            <td class="px-4 py-3">{{ user.fullname }}</td>
                            <td class="px-4 py-3"><span class="bg-gray-100 text-gray-600 py-0.5 px-2 rounded text-xs border">{{ user.department }}</span></td>
                            <td class="px-4 py-3 text-right">
                                <button onclick="openEditUserModal('{{ user.user_id }}', '{{ user.fullname }}', '{{ user.department }}')"
                                    class="text-[#D4AF37] hover:text-[#B8860B] mr-3"><i class="fa-solid fa-pen"></i></button>
                                
                                <a href="/delete_user/{{ user.user_id }}?current_room={{ current_location if current_location else '' }}"
                                onclick="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì {{ user.fullname }} ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?');" 
                                class="text-red-400 hover:text-red-600"><i class="fa-solid fa-trash"></i></a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div id="tabStorage" class="hidden">
                <form action="/add_storage" method="POST" class="flex gap-2 mb-4 bg-gray-50 p-3 rounded-lg border border-gray-100">
                    <input type="hidden" name="current_room" value="{{ current_location if current_location else '' }}">
                    {% if current_location %}
                    <div class="w-1/3">
                        <label class="text-[10px] text-gray-500 mb-1 block uppercase font-bold">‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
                        <input type="text" name="location" value="{{ current_location }}" readonly
                            class="w-full border p-2 rounded text-sm bg-gray-100 text-gray-500 cursor-not-allowed">
                    </div>
                    <div class="flex-1">
                        <label class="text-[10px] text-gray-500 mb-1 block uppercase font-bold">‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏π‡πâ/‡∏ä‡∏±‡πâ‡∏ô‡∏ß‡∏≤‡∏á</label>
                        <input type="text" name="storage_name" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏π‡πâ..." maxlength="100" required
                            class="w-full border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-[#006837]">
                    </div>
                    <div class="flex items-end">
                        <button type="submit" class="bg-[#006837] hover:bg-[#004d26] text-white px-4 py-2 rounded text-sm transition shadow-sm font-prompt">
                            <i class="fa-solid fa-plus mr-1"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°
                        </button>
                    </div>
                    {% else %}
                    <div class="flex-1">
                        <label class="text-[10px] text-gray-500 mb-1 block uppercase font-bold">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</label>
                        <input type="text" name="location" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏Ø" maxlength="100" required
                            class="w-full border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-[#006837]">
                    </div>
                    <div class="w-1/3">
                        <label class="text-[10px] text-gray-500 mb-1 block uppercase font-bold">‡∏ï‡∏π‡πâ‡πÅ‡∏£‡∏Å</label>
                        <input type="text" name="storage_name" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡∏π‡πâ A" maxlength="100" required
                            class="w-full border p-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-[#006837]">
                    </div>
                    <div class="flex items-end">
                        <button type="submit" class="bg-[#006837] hover:bg-[#004d26] text-white px-4 py-2 rounded text-sm transition shadow-sm font-prompt">
                            <i class="fa-solid fa-home mr-1"></i> ‡∏™‡∏£‡πâ‡∏≤‡∏á
                        </button>
                    </div>
                    {% endif %}
                </form>

                <table class="min-w-full text-sm text-left text-gray-600">
                    <thead>
                        {% if current_location %}
                        <tr class="bg-green-50 text-[#006837] font-prompt">
                            <th class="px-4 py-2 rounded-l-lg">‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏π‡πâ/‡∏ä‡∏±‡πâ‡∏ô‡∏ß‡∏≤‡∏á</th>
                            <th class="px-4 py-2 text-right rounded-r-lg">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                        {% else %}
                        <tr class="bg-blue-50 text-[#003366] font-prompt">
                            <th class="px-4 py-2 rounded-l-lg">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á</th>
                            <th class="px-4 py-2 text-right rounded-r-lg">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π</th>
                        </tr>
                        {% endif %}
                    </thead>
                    <tbody>
                        {% if current_location %}
                            {% for storage in storages %}
                                {% if storage.location == current_location %}
                                <tr class="border-b hover:bg-green-50/50 transition">
                                    <td class="px-4 py-3 font-medium text-gray-700"><i class="fa-solid fa-box text-[#D4AF37] mr-2"></i>{{ storage.storage_name }}</td>
                                    <td class="px-4 py-3 text-right">
                                        <button onclick="openEditStorageModal('{{ storage.storage_id }}', '{{ storage.storage_name }}', '{{ storage.location }}')"
                                            class="text-[#D4AF37] hover:text-[#B8860B] mr-3"><i class="fa-solid fa-pen"></i></button>
                                        
                                        <a href="/delete_storage/{{ storage.storage_id }}?current_room={{ current_location }}"
                                            onclick="confirmDelete(event, this.href, '‡∏•‡∏ö‡∏ï‡∏π‡πâ‡∏ô‡∏µ‡πâ?', '‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô {{ storage.storage_name }} ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢ ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?');"
                                            class="text-red-400 hover:text-red-600"><i class="fa-solid fa-trash"></i></a>
                                    </td>
                                </tr>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            {% for loc in locations %}
                            <tr class="border-b hover:bg-gray-50 transition">
                                <td class="px-4 py-3 font-medium text-gray-800"><i class="fa-solid fa-door-open text-[#006837] mr-2"></i> {{ loc }}</td>
                                <td class="px-4 py-3 text-right flex justify-end items-center gap-2">
                                    <a href="{{ url_for('dashboard.room_view', location_name=loc) }}"
                                        class="text-[#006837] hover:underline text-xs font-prompt">‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ <i class="fa-solid fa-arrow-right ml-1"></i></a>
                                    
                                    <a href="/delete_room/{{ loc }}" 
                                        onclick="confirmDoubleCheckSwal(event, this.href, '{{ loc }}');"
                                        class="text-gray-300 hover:text-red-500 ml-2"><i class="fa-solid fa-trash"></i></a>
                                </td>
                            </tr>
                            {% endfor %}
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div id="editItemModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity" onclick="closeEditItemModal()"></div>
        <div class="bg-white rounded-xl p-6 w-full max-w-md relative z-10 shadow-2xl border-t-4 border-[#FFC107]">
            <form action="/update_item" method="POST" class="space-y-4">
                <h3 class="text-xl font-bold mb-4 text-[#FFC107] font-prompt"><i class="fa-solid fa-pen-to-square mr-2"></i>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç / ‡∏¢‡πâ‡∏≤‡∏¢ / ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡∏≠‡∏á</h3>
                <input type="hidden" name="item_id" id="edit_item_id">
                <input type="hidden" name="current_room" value="{{ current_location if current_location else '' }}">

                <div>
                    <label class="block text-sm text-gray-700 mb-1 font-bold">‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏±‡∏™‡∏î‡∏∏</label>
                    <input type="text" name="item_name" id="edit_item_name" maxlength="100" required
                        class="w-full border p-2 rounded-lg focus:ring-2 focus:ring-[#FFC107] outline-none">
                </div>
                <div>
                    <label class="block text-sm text-gray-700 mb-1 font-bold">‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà (‡∏¢‡πâ‡∏≤‡∏¢‡∏Å‡∏•‡πà‡∏≠‡∏á)</label>
                    <select name="storage_id" id="edit_storage_id"
                        class="w-full border p-2 rounded-lg bg-white focus:ring-2 focus:ring-[#FFC107] outline-none">
                        {% for storage in storages %}
                        <option value="{{ storage.storage_id }}">{{ storage.storage_name }} ({{ storage.location }})</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="flex gap-2">
                    <div class="w-2/3">
                        <label class="block text-sm text-gray-700 mb-1 font-bold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</label>
                        <input type="number" name="quantity" id="edit_quantity" min="0" required
                            class="w-full border p-2 rounded-lg focus:ring-2 focus:ring-[#FFC107] outline-none font-bold text-center text-lg">
                    </div>
                    <div class="w-1/3">
                        <label class="block text-sm text-gray-700 mb-1 font-bold">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏ö</label>
                        <input type="text" name="unit" id="edit_unit" maxlength="20" required
                            class="w-full border p-2 rounded-lg bg-gray-50 text-center">
                    </div>
                </div>
                <div class="flex justify-end gap-2 mt-6">
                    <button type="button" onclick="closeEditItemModal()" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="px-4 py-2 bg-[#FFC107] text-white rounded-lg text-sm hover:bg-[#FFA000] shadow-md font-prompt text-shadow-sm">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="editUserModal" class="fixed inset-0 z-[60] hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="fixed inset-0 bg-gray-600 bg-opacity-75" onclick="closeEditUserModal()"></div>
        <div class="bg-white rounded-xl p-6 w-full max-w-md relative z-10 shadow-xl border-l-4 border-[#006837]">
            <form action="/update_user" method="POST">
                <input type="hidden" name="current_room" value="{{ current_location if current_location else '' }}">
                <h3 class="text-lg font-bold mb-4 text-[#006837] font-prompt">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
                <input type="hidden" name="user_id" id="editUserId">
                <div class="space-y-4">
                    <div><label class="block text-sm text-gray-700 mb-1 font-bold">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</label><input type="text" name="fullname" id="editUserFullname" maxlength="100" required class="w-full border p-2 rounded-lg focus:ring-2 focus:ring-[#006837] outline-none"></div>
                    <div><label class="block text-sm text-gray-700 mb-1 font-bold">‡πÅ‡∏ú‡∏ô‡∏Å</label><input type="text" name="department" id="editUserDept" maxlength="100" required class="w-full border p-2 rounded-lg focus:ring-2 focus:ring-[#006837] outline-none"></div>
                </div>
                <div class="mt-6 flex justify-end gap-2">
                    <button type="button" onclick="closeEditUserModal()" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="px-4 py-2 bg-[#006837] text-white rounded-lg text-sm hover:bg-[#004d26] font-prompt shadow-sm">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="editStorageModal" class="fixed inset-0 z-[60] hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="fixed inset-0 bg-gray-600 bg-opacity-75" onclick="closeEditStorageModal()"></div>
        <div class="bg-white rounded-xl p-6 w-full max-w-md relative z-10 shadow-xl border-l-4 border-blue-600">
            <form action="/update_storage" method="POST">
                <input type="hidden" name="current_room" value="{{ current_location if current_location else '' }}">
                <h3 class="text-lg font-bold mb-4 text-blue-700 font-prompt">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö</h3>
                <input type="hidden" name="storage_id" id="editStorageId">
                <div class="space-y-4">
                    <div><label class="block text-sm text-gray-700 mb-1 font-bold">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡πà‡∏≠‡∏á</label><input type="text" name="storage_name" id="editStorageName" maxlength="100" required class="w-full border p-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"></div>
                    <div><label class="block text-sm text-gray-700 mb-1 font-bold">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</label><input type="text" name="location" id="editStorageLocation" maxlength="100" required class="w-full border p-2 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"></div>
                </div>
                <div class="mt-6 flex justify-end gap-2">
                    <button type="button" onclick="closeEditStorageModal()" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 font-prompt shadow-sm">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="editRoomModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity" onclick="closeEditRoomModal()"></div>
        <div class="bg-white rounded-xl p-8 w-full max-w-md relative z-10 shadow-2xl transform transition-all scale-100">
            
            <div class="text-center mb-6">
                <div class="bg-yellow-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-yellow-200">
                    <i class="fa-solid fa-pen-to-square text-2xl text-[#D4AF37]"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 font-prompt">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á</h3>
                <p class="text-gray-500 text-sm mt-1">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°: <span id="displayOldRoomName" class="font-bold text-[#006837]">...</span></p>
            </div>

            <form action="/edit_room" method="POST" class="space-y-4">
                <input type="hidden" name="old_name" id="inputOldRoomName">
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</label>
                    <input type="text" name="new_name" id="inputNewRoomName" maxlength="100" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FFC107] focus:border-[#FFC107] outline-none transition text-center font-bold text-lg text-gray-700">
                </div>

                <div class="flex gap-3 pt-4">
                    <button type="button" onclick="closeEditRoomModal()"
                        class="flex-1 px-4 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 font-medium transition text-sm">
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                    <button type="submit"
                        class="flex-1 px-4 py-2 bg-[#FFC107] text-white rounded-lg hover:bg-[#FFA000] font-medium shadow-lg transition text-sm font-prompt text-shadow-sm">
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="returnModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity" onclick="closeReturnModal()"></div>
        <div class="bg-white rounded-xl p-6 w-full max-w-md relative z-10 shadow-2xl border-t-4 border-[#006837]">
            <h3 class="text-xl font-bold mb-2 text-[#006837] font-prompt"><i class="fa-solid fa-rotate-left mr-2"></i>‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏û‡∏±‡∏™‡∏î‡∏∏</h3>
            
            <p class="text-sm text-gray-500 mb-4 bg-green-50 p-3 rounded-lg border border-green-100">
                <span class="block mb-1">üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: <span id="returnItemName" class="font-bold text-gray-800">...</span></span>
                <span class="block">üë§ ‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°: <span id="returnUserName" class="font-bold text-gray-800">...</span></span>
                <span class="block mt-1 pt-1 border-t border-green-200">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏°‡πÑ‡∏õ: <span id="borrowedAmountDisplay" class="font-bold text-red-600">...</span> ‡∏ä‡∏¥‡πâ‡∏ô</span>
            </p>
            
            <form action="/return_item_confirm" method="POST" class="space-y-4">
                <input type="hidden" name="borrow_id" id="returnBorrowId">
                <input type="hidden" name="borrowed_amount" id="returnBorrowedAmount">

                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏°‡∏≤‡∏Ñ‡∏∑‡∏ô‡∏à‡∏£‡∏¥‡∏á</label>
                    <input type="number" name="return_amount" id="returnAmountInput" required min="0" 
                           class="w-full border-2 border-green-200 p-2 rounded-lg text-center font-bold text-[#006837] text-2xl focus:ring-green-500 focus:border-green-500 outline-none">
                    <p class="text-xs text-red-400 mt-1 text-center font-light">* ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏±‡∏î‡∏¢‡∏≠‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ</p>
                </div>

                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">‡∏™‡∏†‡∏≤‡∏û‡∏û‡∏±‡∏™‡∏î‡∏∏</label>
                    <div class="grid grid-cols-2 gap-2">
                        <label class="cursor-pointer bg-green-50 border border-green-200 rounded-lg p-2 text-center hover:bg-green-100 transition">
                            <input type="radio" name="item_condition" value="‡∏õ‡∏Å‡∏ï‡∏¥" checked class="accent-[#006837]">
                            <span class="text-sm text-[#006837] font-bold block mt-1"><i class="fa-solid fa-check-circle"></i> ‡∏õ‡∏Å‡∏ï‡∏¥</span>
                        </label>
                        <label class="cursor-pointer bg-red-50 border border-red-200 rounded-lg p-2 text-center hover:bg-red-100 transition">
                            <input type="radio" name="item_condition" value="‡∏ä‡∏≥‡∏£‡∏∏‡∏î/‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢" class="accent-red-600">
                            <span class="text-sm text-red-600 font-bold block mt-1"><i class="fa-solid fa-triangle-exclamation"></i> ‡∏ä‡∏≥‡∏£‡∏∏‡∏î/‡∏´‡∏≤‡∏¢</span>
                        </label>
                    </div>
                </div>

                <div>
                    <label class="text-xs font-bold text-gray-500 uppercase">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                    <input type="text" name="return_note" maxlength="255" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤, ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö" class="w-full border p-2 rounded-lg text-sm mt-1 outline-none focus:border-[#006837]">
                </div>

                <div class="flex justify-end gap-2 mt-4 pt-2 border-t">
                    <button type="button" onclick="closeReturnModal()" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200 transition">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="px-4 py-2 bg-[#006837] text-white rounded-lg text-sm hover:bg-[#004d26] shadow-md font-prompt transition">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô</button>
                </div>
            </form>
        </div>
    </div>
</div>